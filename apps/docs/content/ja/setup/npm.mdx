# ğŸ“¦ NPM

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã„ãã¤ã‹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’NPMã«å…¬é–‹ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯NPMå…¬é–‹ã®ãŸã‚ã®åŸºæœ¬çš„ãªè¨­å®šæ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## npmå…¬é–‹ç”¨ãƒˆãƒ¼ã‚¯ãƒ³ã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆå¤‰æ•°ã« `NPM_TOKEN` ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®ãƒˆãƒ¼ã‚¯ãƒ³ã¯npmã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¬é–‹ã™ã‚‹éš›ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
GitHub Secretsã« `NPM_TOKEN` ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã«å¾“ã£ã¦ãã ã•ã„ï¼š

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã®ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚
2. `Settings` ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚
3. `Secrets and variables` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç§»å‹•ã—ã¾ã™ã€‚
4. `Actions` ã‚’é¸æŠã—ã¾ã™ã€‚
5. `New repository secret` ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚
6. [npm](https://www.npmjs.com/)ã§ç™ºè¡Œã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ `NPM_TOKEN` ã¨ã„ã†åå‰ã§è¿½åŠ ã—ã¾ã™ã€‚

```yaml filename=".github/workflows/release.yml" {12}
      - name: Create Release Pull Request
        uses: changesets/action@v1
        with:
          version: pnpm version-packages
          # publish: pnpm publish-packages # fixme: if you want to publish packages, uncomment this line
          commit: |
            chore(release): ğŸ¦‹ versioning packages by changesets
          title: |
            ğŸ¦‹ Versioning packages
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }} # fixme: if you want to publish packages, set this secret on your repo
```

## npmå…¬é–‹ç”¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯NPMå…¬é–‹ã®ãŸã‚ã«releaseãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®šç¾©ã—ã€changesetsãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚
ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã€PRæ‰¿èªæ™‚ã«è‡ªå‹•ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã€å¤‰æ›´å†…å®¹ã‚’è¨˜éŒ²ã—ã€NPMã«å…¬é–‹ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’å«ã¿ã¾ã™ã€‚

### release.ymlãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆè§£é™¤

releaseãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ã§ã™ãŒã€npmå…¬é–‹ã¯æœ‰åŠ¹ã«ãªã£ã¦ã„ã¾ã›ã‚“ã€‚
npmå…¬é–‹ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€`release.yml` ãƒ•ã‚¡ã‚¤ãƒ«ã® `publish` ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```yaml filename=".github/workflows/release.yml" {5}
      - name: Create Release Pull Request
        uses: changesets/action@v1
        with:
          version: pnpm version-packages
          # publish: pnpm publish-packages # fixme: if you want to publish packages, uncomment this line
          commit: |
            chore(release): ğŸ¦‹ versioning packages by changesets
          title: |
            ğŸ¦‹ Versioning packages
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }} # fixme: if you want to publish packages, set this secret on your repo
```
